<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cachemere: cachemere::policy::EvictionSegmentedLRU&lt; Key, Value &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cachemere
   </div>
   <div id="projectbrief">Modular Caching Library for C++</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacecachemere.html">cachemere</a></li><li class="navelem"><b>policy</b></li><li class="navelem"><a class="el" href="classcachemere_1_1policy_1_1EvictionSegmentedLRU.html">EvictionSegmentedLRU</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classcachemere_1_1policy_1_1EvictionSegmentedLRU-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">cachemere::policy::EvictionSegmentedLRU&lt; Key, Value &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Segmented Least Recently Used (S-LRU) Eviction Policy.  
 <a href="classcachemere_1_1policy_1_1EvictionSegmentedLRU.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="eviction__segmented__lru_8h_source.html">eviction_segmented_lru.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcachemere_1_1policy_1_1EvictionSegmentedLRU_1_1VictimIterator.html">VictimIterator</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterator for iterating over cache items in the order they should be.  <a href="classcachemere_1_1policy_1_1EvictionSegmentedLRU_1_1VictimIterator.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:aefe2225d76996869e5a6c8b970d38ce6"><td class="memItemLeft" align="right" valign="top"><a id="aefe2225d76996869e5a6c8b970d38ce6"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>CacheItem</b> = <a class="el" href="structcachemere_1_1detail_1_1Item.html">cachemere::detail::Item</a>&lt; Key, Value &gt;</td></tr>
<tr class="separator:aefe2225d76996869e5a6c8b970d38ce6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae27e735292643a89a0f2257750ab30ae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcachemere_1_1policy_1_1EvictionSegmentedLRU.html#ae27e735292643a89a0f2257750ab30ae">set_protected_segment_size</a> (size_t size)</td></tr>
<tr class="memdesc:ae27e735292643a89a0f2257750ab30ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the maximum number of items in the protected LRU segment.  <a href="classcachemere_1_1policy_1_1EvictionSegmentedLRU.html#ae27e735292643a89a0f2257750ab30ae">More...</a><br /></td></tr>
<tr class="separator:ae27e735292643a89a0f2257750ab30ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed349d9266d38c9f5ab3851a0a57aba8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcachemere_1_1policy_1_1EvictionSegmentedLRU.html#aed349d9266d38c9f5ab3851a0a57aba8">on_insert</a> (const <a class="el" href="structcachemere_1_1detail_1_1Item.html">CacheItem</a> &amp;item)</td></tr>
<tr class="memdesc:aed349d9266d38c9f5ab3851a0a57aba8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Insertion event handler.  <a href="classcachemere_1_1policy_1_1EvictionSegmentedLRU.html#aed349d9266d38c9f5ab3851a0a57aba8">More...</a><br /></td></tr>
<tr class="separator:aed349d9266d38c9f5ab3851a0a57aba8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a5f6be75f07d9212a3acf070d43428b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcachemere_1_1policy_1_1EvictionSegmentedLRU.html#a0a5f6be75f07d9212a3acf070d43428b">on_update</a> (const <a class="el" href="structcachemere_1_1detail_1_1Item.html">CacheItem</a> &amp;item)</td></tr>
<tr class="memdesc:a0a5f6be75f07d9212a3acf070d43428b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update event handler.  <a href="classcachemere_1_1policy_1_1EvictionSegmentedLRU.html#a0a5f6be75f07d9212a3acf070d43428b">More...</a><br /></td></tr>
<tr class="separator:a0a5f6be75f07d9212a3acf070d43428b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66203a81f3e53fdb901ace9d9bd1c12f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcachemere_1_1policy_1_1EvictionSegmentedLRU.html#a66203a81f3e53fdb901ace9d9bd1c12f">on_cache_hit</a> (const <a class="el" href="structcachemere_1_1detail_1_1Item.html">CacheItem</a> &amp;item)</td></tr>
<tr class="memdesc:a66203a81f3e53fdb901ace9d9bd1c12f"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classcachemere_1_1Cache.html" title="Thread-safe memory-restricted cache.">Cache</a> hit event handler.  <a href="classcachemere_1_1policy_1_1EvictionSegmentedLRU.html#a66203a81f3e53fdb901ace9d9bd1c12f">More...</a><br /></td></tr>
<tr class="separator:a66203a81f3e53fdb901ace9d9bd1c12f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09c434294c5b48d50fbb17f920bf3f7b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcachemere_1_1policy_1_1EvictionSegmentedLRU.html#a09c434294c5b48d50fbb17f920bf3f7b">on_evict</a> (const Key &amp;item)</td></tr>
<tr class="memdesc:a09c434294c5b48d50fbb17f920bf3f7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Eviction event handler.  <a href="classcachemere_1_1policy_1_1EvictionSegmentedLRU.html#a09c434294c5b48d50fbb17f920bf3f7b">More...</a><br /></td></tr>
<tr class="separator:a09c434294c5b48d50fbb17f920bf3f7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb15dfa19b3c89c7136da5da581766ed"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcachemere_1_1policy_1_1EvictionSegmentedLRU_1_1VictimIterator.html">VictimIterator</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcachemere_1_1policy_1_1EvictionSegmentedLRU.html#acb15dfa19b3c89c7136da5da581766ed">victim_begin</a> () const</td></tr>
<tr class="memdesc:acb15dfa19b3c89c7136da5da581766ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get an iterator to the first item that should be evicted.  <a href="classcachemere_1_1policy_1_1EvictionSegmentedLRU.html#acb15dfa19b3c89c7136da5da581766ed">More...</a><br /></td></tr>
<tr class="separator:acb15dfa19b3c89c7136da5da581766ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2178dc8f62d24643dc5f95c81632159"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcachemere_1_1policy_1_1EvictionSegmentedLRU_1_1VictimIterator.html">VictimIterator</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcachemere_1_1policy_1_1EvictionSegmentedLRU.html#ae2178dc8f62d24643dc5f95c81632159">victim_end</a> () const</td></tr>
<tr class="memdesc:ae2178dc8f62d24643dc5f95c81632159"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get an end iterator.  <a href="classcachemere_1_1policy_1_1EvictionSegmentedLRU.html#ae2178dc8f62d24643dc5f95c81632159">More...</a><br /></td></tr>
<tr class="separator:ae2178dc8f62d24643dc5f95c81632159"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename Key, typename Value&gt;<br />
class cachemere::policy::EvictionSegmentedLRU&lt; Key, Value &gt;</h3>

<p>Segmented Least Recently Used (S-LRU) Eviction Policy. </p>
<p>Segmented LRU is really similar to LRU. The main difference is that a segmented LRU policy has <em>two</em> separate LRU segments. Items are initially inserted in a probation segment. When items that are on probation are accessed, they are promoted from the protected segment. If the protected segment is full, the item that was least-recently accessed is downgraded to the probation segment. This architecture has the effect of reducing cache churn and keeping "good" items in cache a bit longer. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a66203a81f3e53fdb901ace9d9bd1c12f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66203a81f3e53fdb901ace9d9bd1c12f">&#9670;&nbsp;</a></span>on_cache_hit()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Key , typename Value &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classcachemere_1_1policy_1_1EvictionSegmentedLRU.html">cachemere::policy::EvictionSegmentedLRU</a>&lt; Key, Value &gt;::on_cache_hit </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcachemere_1_1detail_1_1Item.html">CacheItem</a> &amp;&#160;</td>
          <td class="paramname"><em>item</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="classcachemere_1_1Cache.html" title="Thread-safe memory-restricted cache.">Cache</a> hit event handler. </p>
<p>If the item is in the probation segment, it is moved to the protected segment. If the item is in the protected segment, it is moved to the front of the protected segment. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">item</td><td>The item that has been hit. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a09c434294c5b48d50fbb17f920bf3f7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09c434294c5b48d50fbb17f920bf3f7b">&#9670;&nbsp;</a></span>on_evict()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Key , typename Value &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classcachemere_1_1policy_1_1EvictionSegmentedLRU.html">cachemere::policy::EvictionSegmentedLRU</a>&lt; Key, Value &gt;::on_evict </td>
          <td>(</td>
          <td class="paramtype">const Key &amp;&#160;</td>
          <td class="paramname"><em>item</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Eviction event handler. </p>
<p>Removes the item from the segment it belongs to. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">item</td><td>The key of the item that was evicted. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aed349d9266d38c9f5ab3851a0a57aba8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed349d9266d38c9f5ab3851a0a57aba8">&#9670;&nbsp;</a></span>on_insert()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Key , typename Value &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classcachemere_1_1policy_1_1EvictionSegmentedLRU.html">cachemere::policy::EvictionSegmentedLRU</a>&lt; Key, Value &gt;::on_insert </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcachemere_1_1detail_1_1Item.html">CacheItem</a> &amp;&#160;</td>
          <td class="paramname"><em>item</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Insertion event handler. </p>
<p>Inserts the provided item at the front of the probation segment. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">item</td><td>The item that has been inserted in the cache. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0a5f6be75f07d9212a3acf070d43428b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a5f6be75f07d9212a3acf070d43428b">&#9670;&nbsp;</a></span>on_update()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Key , typename Value &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classcachemere_1_1policy_1_1EvictionSegmentedLRU.html">cachemere::policy::EvictionSegmentedLRU</a>&lt; Key, Value &gt;::on_update </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcachemere_1_1detail_1_1Item.html">CacheItem</a> &amp;&#160;</td>
          <td class="paramname"><em>item</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update event handler. </p>
<p>If the item is in the probation segment, it is moved to the protected segment. If the item is in the protected segment, it is moved to the front of the protected segment. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">item</td><td>The item that has been updated in the cache. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae27e735292643a89a0f2257750ab30ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae27e735292643a89a0f2257750ab30ae">&#9670;&nbsp;</a></span>set_protected_segment_size()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Key , typename Value &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classcachemere_1_1policy_1_1EvictionSegmentedLRU.html">cachemere::policy::EvictionSegmentedLRU</a>&lt; Key, Value &gt;::set_protected_segment_size </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the maximum number of items in the protected LRU segment. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>The maximum number of items in the protected segment. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="acb15dfa19b3c89c7136da5da581766ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb15dfa19b3c89c7136da5da581766ed">&#9670;&nbsp;</a></span>victim_begin()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Key , typename Value &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcachemere_1_1policy_1_1EvictionSegmentedLRU_1_1VictimIterator.html">VictimIterator</a> <a class="el" href="classcachemere_1_1policy_1_1EvictionSegmentedLRU.html">cachemere::policy::EvictionSegmentedLRU</a>&lt; Key, Value &gt;::victim_begin </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get an iterator to the first item that should be evicted. </p>
<p>Considering that the keys are ordered internally from most-recently used to least-recently used, this iterator will effectively walk the internal structure backwards. </p><dl class="section return"><dt>Returns</dt><dd>An item iterator. </dd></dl>

</div>
</div>
<a id="ae2178dc8f62d24643dc5f95c81632159"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2178dc8f62d24643dc5f95c81632159">&#9670;&nbsp;</a></span>victim_end()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Key , typename Value &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcachemere_1_1policy_1_1EvictionSegmentedLRU_1_1VictimIterator.html">VictimIterator</a> <a class="el" href="classcachemere_1_1policy_1_1EvictionSegmentedLRU.html">cachemere::policy::EvictionSegmentedLRU</a>&lt; Key, Value &gt;::victim_end </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get an end iterator. </p>
<dl class="section return"><dt>Returns</dt><dd>The end iterator. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/cachemere/policy/<a class="el" href="eviction__segmented__lru_8h_source.html">eviction_segmented_lru.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
